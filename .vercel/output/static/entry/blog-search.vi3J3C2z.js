import{j as e}from"../chunks/jsx-runtime.D_zvdyIk.js";import{r as l}from"../chunks/index.WFquGv8Z.js";import{t as $}from"../chunks/tiptap-to-html.BykSPZaa.js";import{f as S}from"../chunks/date-utils.CT4EJ0jl.js";import{f as _,F as R}from"../chunks/search-service.C9HhnvYq.js";function F({initialPosts:t,labels:o,locale:i="en",taxonomies:g,pagination:a}){const[n,h]=l.useState(""),[s,f]=l.useState(null),[c,p]=l.useState(!1),[m,u]=l.useState([]),[x,w]=l.useState(!1),[b,C]=l.useState([]),v=l.useRef(null),j=l.useRef(null),N=l.useMemo(()=>{const r=new Set;return t.forEach(d=>{d.categories&&d.categories.length>0&&d.categories.forEach(y=>r.add(y.name))}),Array.from(r)},[t]),k=l.useMemo(()=>t.filter(r=>s?r.categories?.some(y=>y.name===s):!0),[t,s]),L=async()=>{if(p(!0),b.length===0&&!x){w(!0);const r=await _(i);C(r),v.current=new R(r,{keys:["title"],threshold:.3,includeScore:!0}),w(!1)}};l.useEffect(()=>{if(!n||!v.current){u([]);return}const r=v.current.search(n);u(r.map(d=>d.item).slice(0,5))},[n]),l.useEffect(()=>{const r=d=>{j.current&&!j.current.contains(d.target)&&p(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]);const B=i==="pt_BR"?"/br":"";return e.jsxs("div",{className:"w-full relative",ref:j,children:[e.jsxs("div",{className:`mb-12 space-y-6 ${c?"z-50 relative":""}`,children:[e.jsxs("div",{className:"relative max-w-xl mx-auto",children:[e.jsx("input",{type:"text",placeholder:o.searchPlaceholder,value:n,onFocus:L,onChange:r=>h(r.target.value),className:"w-full pl-12 pr-4 py-4 bg-bg-card border border-border rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all text-text-main placeholder-text-muted"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),c&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-bg-card border border-border rounded-xl shadow-2xl overflow-hidden animate-fade-in z-50",children:[x&&b.length===0&&e.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:e.jsxs("span",{className:"inline-block animate-pulse",children:["Wait, loading ",i==="pt_BR"?"artigos":"articles","..."]})}),!x&&n.length>0&&m.length===0&&e.jsx("div",{className:"p-4 text-center text-text-muted text-sm",children:o.emptyStateTitle}),m.length>0&&e.jsx("ul",{className:"divide-y divide-border/50",children:m.map(r=>e.jsx("li",{children:e.jsxs("a",{href:`${B}/blog/${r.slug}`,className:"block p-4 hover:bg-bg-elevated transition-colors group",children:[e.jsx("h4",{className:"font-bold text-text-main group-hover:text-primary transition-colors",children:r.title}),e.jsx("span",{className:"text-xs text-text-muted",children:r.published_at?S(r.published_at,i):""})]})},r.slug))}),!x&&n.length===0&&b.length>0&&e.jsx("div",{className:"p-4 text-center text-xs text-text-muted",children:"Type to search across all articles"})]})]}),!c&&N.length>0&&e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 animate-fade-in",children:[e.jsx("button",{onClick:()=>f(null),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${s===null?"bg-primary text-white shadow-lg shadow-primary/25":"bg-bg-elevated text-text-muted hover:bg-bg-card border border-border"}`,children:o.allCategories}),N.map(r=>e.jsx("button",{onClick:()=>f(r),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${s===r?"bg-primary text-white shadow-lg shadow-primary/25":"bg-bg-elevated text-text-muted hover:bg-bg-card border border-border"}`,children:r},r))]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-bg-main/80 backdrop-blur-sm z-40 transition-opacity","aria-hidden":"true"}),e.jsx("div",{className:`grid md:grid-cols-2 lg:grid-cols-3 gap-8 animate-fade-in ${c?"opacity-50 pointer-events-none filter blur-sm":""}`,children:k.length>0?k.map(r=>e.jsx(M,{post:r,readMoreLabel:o.readMore,locale:i,taxonomies:g},r.id)):e.jsxs("div",{className:"col-span-full text-center py-20",children:[e.jsx("div",{className:"w-16 h-16 bg-bg-elevated rounded-full flex items-center justify-center mx-auto mb-4 text-text-muted",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),e.jsx("h3",{className:"text-xl font-bold text-text-main mb-2",children:o.emptyStateTitle}),e.jsx("p",{className:"text-text-muted",children:o.emptyStateText})]})}),a&&a.lastPage>1&&!c&&e.jsxs("div",{className:"flex justify-center gap-4 mt-16 animate-fade-in-up",children:[a.url.prev&&e.jsxs("a",{href:a.url.prev,className:"flex items-center gap-2 px-6 py-3 rounded-full bg-bg-elevated border border-border hover:border-primary hover:text-primary transition-all font-medium",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})}),i==="pt_BR"?"Anterior":"Previous"]}),e.jsxs("span",{className:"flex items-center px-4 font-serif font-bold text-text-muted",children:[a.currentPage," / ",a.lastPage]}),a.url.next&&e.jsxs("a",{href:a.url.next,className:"flex items-center gap-2 px-6 py-3 rounded-full bg-bg-elevated border border-border hover:border-primary hover:text-primary transition-all font-medium",children:[i==="pt_BR"?"PrÃ³xima":"Next",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]})}function M({post:t,readMoreLabel:o,locale:i="en",taxonomies:g}){const a=!!t.featured_image,n=i==="pt_BR"?"/br":"",h=g?.category.slug||"category";return e.jsxs("article",{className:`group flex flex-col bg-bg-card border border-border rounded-2xl overflow-hidden hover:border-primary/50 transition-all duration-300 hover:-translate-y-1 ${a?"":"animate-fade-in"}`,children:[a&&t.featured_image&&e.jsxs("a",{href:`${n}/blog/${t.slug}`,className:"relative aspect-video overflow-hidden block",children:[e.jsx("img",{src:t.featured_image.preview||t.featured_image.url,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"}),t.categories&&t.categories.length>0&&e.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:t.categories.map(s=>e.jsx("a",{href:`${n}/${h}/${s.slug}`,className:"inline-flex items-center rounded px-3 py-1 text-xs font-medium bg-primary text-white shadow-lg hover:bg-primary-dark transition-colors",children:s.name},s.slug))})]}),e.jsxs("div",{className:`flex-1 p-6 flex flex-col ${a?"":"justify-center"}`,children:[!a&&t.categories&&t.categories.length>0&&e.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:t.categories.map(s=>e.jsx("a",{href:`${n}/${h}/${s.slug}`,className:"inline-flex items-center rounded px-3 py-1 text-xs font-medium bg-primary/10 text-primary border border-primary/20 hover:bg-primary/20 transition-colors",children:s.name},s.slug))}),e.jsx("a",{href:`${n}/blog/${t.slug}`,className:"group-hover:text-primary transition-colors block",children:e.jsx("h3",{className:`font-serif font-bold mb-3 leading-tight ${a?"text-2xl":"text-3xl md:text-4xl"}`,children:t.title})}),e.jsxs("div",{className:"flex items-center justify-between pt-6 mt-auto",children:[(()=>{let s="";t.data?.content?Array.isArray(t.data.content)?s=$({content:t.data.content}):t.data.content.content&&Array.isArray(t.data.content.content)&&(s=$(t.data.content)):s=t.content||"";const c=s.replace(/<[^>]*>/g," ").split(/\s+/).filter(x=>x.length>0).length,m=`${Math.max(1,Math.ceil(c/200))} ${i==="pt_BR"?"min de leitura":"min read"}`,u=t.published_at?S(t.published_at,i):"";return e.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium text-text-muted",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsx("span",{children:m})]}),u&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),e.jsx("span",{children:u})]})]})})(),e.jsxs("a",{href:`${n}/blog/${t.slug}`,className:"text-sm font-bold text-primary flex items-center gap-1 group/link",children:[o,e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 transition-transform group-hover/link:translate-x-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"m12 5 7 7-7 7"})]})]})]})]})]})}export{F as default};

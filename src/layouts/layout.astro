---
import SeoHead from "../components/seo-head.astro";
import "../styles/app.css";

interface Props {
    title?: string;
    description?: string;
    image?: string;
}

const { title, description, image } = Astro.props;
---

<!doctype html>
<html lang="pt-BR" class="scroll-smooth">
    <head>
        <SeoHead title={title} description={description} image={image} />
        {
            import.meta.env.GTAG && (
                <>
                    <script
                        async
                        src={`https://www.googletagmanager.com/gtag/js?id=${import.meta.env.GTAG}`}
                    />
                    <script
                        define:vars={{ GTAG: import.meta.env.GTAG }}
                    >
                        window.dataLayer = window.dataLayer || [];
                        function gtag() {
                            dataLayer.push(arguments);
                        }
                        gtag("js", new Date());

                        gtag("config", GTAG);
                    </script>
                </>
            )
        }
    </head>
    <body
        class="bg-bg text-text-main antialiased selection:bg-primary selection:text-white overflow-x-hidden"
    >
        <slot />
        <script is:inline>
            // @ts-nocheck
            !function(){const apiUrl='https://app.rushcms.com/api/v1/rafhael/analytics/pageview';const track=function(){const entryMeta=document.querySelector('meta[name=\'entry-slug\']');const entrySlug=entryMeta?entryMeta.content:null;const pathSegments=window.location.pathname.split('/').filter(Boolean);const finalSlug=entrySlug||(pathSegments.length===0?'home':pathSegments.pop());if(finalSlug){const collectionMeta=document.querySelector('meta[name=\'collection-slug\']');const payload={entry_slug:finalSlug,collection_slug:collectionMeta?collectionMeta.content:null,session_id:function(){if(!window._sid){const agent=navigator.userAgent+(new Date).toDateString();let hash=0;for(let i=0;i<agent.length;i++){const char=agent.charCodeAt(i);hash=(hash<<5)-hash+char;hash&=hash}window._sid=Math.abs(hash).toString(16).padStart(32,'0').substring(0,32)}return window._sid}(),referrer:document.referrer||null,utm_source:new URLSearchParams(window.location.search).get('utm_source'),utm_medium:new URLSearchParams(window.location.search).get('utm_medium'),utm_campaign:new URLSearchParams(window.location.search).get('utm_campaign')};fetch(apiUrl,{method:'POST',headers:{'Content-Type':'application/json',Accept:'application/json'},body:JSON.stringify(payload),keepalive:true}).catch(function(err){console.error(err)})}};document.readyState!=='loading'?setTimeout(track,1000):document.addEventListener('DOMContentLoaded',function(){setTimeout(track,1000)})}();
        </script>
    </body>
</html>

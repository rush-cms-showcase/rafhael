---
import Layout from "../layouts/layout.astro";
import Header from "../components/header.astro";
import Hero from "../components/hero.astro";
import Problem from "../components/problem.astro";
import Pricing from "../components/pricing.astro";
import Process from "../components/process.astro";
import Testimonial from "../components/testimonial.astro";
import Footer from "../components/footer.astro";
import Section from "../components/ui/section.astro";
import Button from "../components/ui/button.astro";
import { homeContent } from "../content/home";

// Use English content
const content = homeContent.en;

// Page-specific metadata
const title = content.metadata.title;
const description = content.metadata.description;
---

<Layout title={title} description={description}>
    <Header content={content.global.nav} locale="en" />

    <main>
        <Hero content={content.hero} />
        <Problem content={content.problem} />
        <Pricing content={content.pricing} />
        <Process content={content.process} />
        <Testimonial content={content.testimonial} />

        <Section class="text-center">
            <h2 class="font-serif text-4xl md:text-5xl font-bold mb-8">
                {content.ctaSection.title}
            </h2>
            <Button
                href="https://wa.me/5512983173077"
                variant="primary"
                size="lg"
                className="shadow-lg shadow-primary/25"
            >
                {content.ctaSection.button}
            </Button>
        </Section>
    </main>

    <Footer content={content.global.footer} />
    <script is:inline>
        (function() {
            try {
                const savedLang = localStorage.getItem('rush_lang_pref');
                const userLang = navigator.language || navigator.userLanguage;
                
                if (savedLang === 'pt') {
                    window.location.href = '/br';
                } else if (!savedLang && userLang && userLang.startsWith('pt')) {
                    window.location.href = '/br';
                }
            } catch (e) {
                console.error('Language redirect error:', e);
            }
        })();
    </script>
</Layout>
